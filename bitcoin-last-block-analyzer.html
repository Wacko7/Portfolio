<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Bitcoin Last Block Analyzer</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <nav>
    <a href="index.html">← Back to Portfolio</a>
  </nav>

  <header class="project-header">
    <h1>Bitcoin Last Block Analyzer</h1>
    <p>A Python tool built using the mempool.space API</p>
  </header>

  <main>

    <section>
      <h2>Overview</h2>
      <p>
        This project connects to the mempool.space API and retrieves the latest 
        Bitcoin block in real time. It extracts and displays:
      </p>
      <ul>
        <li>Block height</li>
        <li>Number of transactions</li>
        <li>Block size and weight</li>
        <li>Total fees</li>
        <li>The 5 largest transactions</li>
      </ul>
    </section>

    <section>
      <h2>Why I built this</h2>
      <p>
        To learn how Bitcoin blocks work, how to use APIs, how to parse JSON, 
        and how real blockchain data is structured.
      </p>
    </section>

    <section>
        <h2>Source Code</h2>

        <pre class="code-window"><code>
        import json
        from datetime import datetime
        import requests

        def sats_to_btc(sats):
            return sats / 100_000_000

        URL = "https://mempool.space/api/blocks"
        response = requests.get(URL)
        block = response.json()[0]  # Get the latest block  
        size= block["size"]
        weight= block["weight"]
        tx_count= block["tx_count"]

        URL_tx= f"https://mempool.space/api/block/{block['id']}/txs"
        response_tx = requests.get(URL_tx)
        txs = response_tx.json()

        for tx in txs:
            total_vout = sum(vout["value"] for vout in tx["vout"])
            tx['total_vout'] = total_vout

        biggest_tx = sorted(txs, key=lambda x: x['total_vout'], reverse=True)[: 1]  # Top 1 biggest transaction
        clean_biggest_txs = [
            {
                "txid": tx["txid"],
                "value_btc": sats_to_btc(tx["total_vout"])
            }
            for tx in biggest_tx
        ]
        block_data = {
            "block_height": block["height"],
            "timestamp": datetime.fromtimestamp(block["timestamp"]).isoformat(),
            "size": size,
            "weight": weight,
            "tx_count": tx_count,
            "biggest_transactions":clean_biggest_txs
        }

        with open("block_summary.json", "w") as f:
            json.dump(block_data, f, indent=4)

        print(block_data, indent=4)
        </code></pre>
    </section>


    <section>
      <h2>Links</h2>
      <a class="btn" href="https://github.com/Wacko7/btc-latest-block-analyzer.git" target="_blank">View on GitHub</a>
    </section>

  </main>

  <footer>
    <p>© 2025 Tito</p>
  </footer>

</body>
</html>
